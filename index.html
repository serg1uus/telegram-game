<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞ –®–ª—è–ø–∞ - Telegram Mini App</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body class="bg-gradient-to-br from-blue-500 to-purple-600 min-h-screen text-white">
    <div class="container mx-auto px-4 py-6 max-w-md">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="mainScreen" class="screen">
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl">
                <div class="text-center mb-8">
                    <div class="text-6xl mb-4">üé©</div>
                    <h1 class="text-3xl font-bold mb-2">–ò–≥—Ä–∞ –®–ª—è–ø–∞</h1>
                    <p class="text-white/80">–û–±—ä—è—Å–Ω—è–π —Å–ª–æ–≤–∞ –∏ —É–≥–∞–¥—ã–≤–∞–π!</p>
                </div>
                
                <div class="space-y-4">
                    <button onclick="startNewGame()" class="w-full bg-white text-purple-600 py-4 px-6 rounded-xl font-semibold text-lg hover:bg-white/90 transition-all transform hover:scale-105">
                        üéÆ –ù–æ–≤–∞—è –∏–≥—Ä–∞
                    </button>
                    <button onclick="showRules()" class="w-full bg-white/20 py-4 px-6 rounded-xl font-semibold text-lg hover:bg-white/30 transition-all">
                        üìñ –ü—Ä–∞–≤–∏–ª–∞
                    </button>
                    <button onclick="showCategories()" class="w-full bg-white/20 py-4 px-6 rounded-xl font-semibold text-lg hover:bg-white/30 transition-all">
                        üìù –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–ª–æ–≤
                    </button>
                </div>
                
                <div class="mt-8 text-center text-white/60 text-sm">
                    <p>–í—Å–µ–≥–æ —Å–ª–æ–≤ –≤ –±–∞–∑–µ: <span id="totalWords">0</span></p>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª -->
        <div id="rulesScreen" class="screen hidden">
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl">
                <h2 class="text-2xl font-bold mb-4">üìñ –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h2>
                <div class="space-y-3 text-white/90">
                    <p>üéØ <strong>–¶–µ–ª—å:</strong> –û–±—ä—è—Å–Ω–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ —Å–ª–æ–≤ –∑–∞ –æ—Ç–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è</p>
                    <p>‚è±Ô∏è <strong>–í—Ä–µ–º—è:</strong> 60 —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ä–∞—É–Ω–¥</p>
                    <p>üö´ <strong>–ù–µ–ª—å–∑—è:</strong> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ–∫–æ—Ä–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥—ã</p>
                    <p>‚úÖ <strong>–ú–æ–∂–Ω–æ:</strong> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã, –æ–ø–∏—Å–∞–Ω–∏—è, –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏</p>
                    <p>‚≠ê <strong>–û—á–∫–∏:</strong> +1 –∑–∞ —É–≥–∞–¥–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ, -1 –∑–∞ –ø—Ä–æ–ø—É—Å–∫</p>
                </div>
                <button onclick="showMain()" class="w-full mt-6 bg-white/20 py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
        <div id="categoriesScreen" class="screen hidden">
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl">
                <h2 class="text-2xl font-bold mb-4">üìù –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                <div id="categoryList" class="space-y-2 mb-6">
                    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
                <div class="space-y-3">
                    <button onclick="saveCategories()" class="w-full bg-green-500 py-3 px-6 rounded-xl font-semibold hover:bg-green-600 transition-all">
                        ‚úì –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                    <button onclick="showMain()" class="w-full bg-white/20 py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                        ‚Üê –ù–∞–∑–∞–¥
                    </button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã -->
        <div id="setupScreen" class="screen hidden">
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl">
                <h2 class="text-2xl font-bold mb-6">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-white/80 mb-2">–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞ (—Å–µ–∫)</label>
                        <select id="roundTime" class="w-full bg-white/20 p-3 rounded-lg text-white">
                            <option value="30">30 —Å–µ–∫—É–Ω–¥</option>
                            <option value="60" selected>60 —Å–µ–∫—É–Ω–¥</option>
                            <option value="90">90 —Å–µ–∫—É–Ω–¥</option>
                            <option value="120">120 —Å–µ–∫—É–Ω–¥</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-white/80 mb-2">–°–ª–æ–∂–Ω–æ—Å—Ç—å</label>
                        <select id="difficulty" class="w-full bg-white/20 p-3 rounded-lg text-white">
                            <option value="easy">–õ–µ–≥–∫–æ</option>
                            <option value="medium" selected>–°—Ä–µ–¥–Ω–µ</option>
                            <option value="hard">–°–ª–æ–∂–Ω–æ</option>
                            <option value="mixed">–°–º–µ—à–∞–Ω–Ω–∞—è</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-6 space-y-3">
                    <button onclick="startGame()" class="w-full bg-green-500 py-4 px-6 rounded-xl font-semibold text-lg hover:bg-green-600 transition-all transform hover:scale-105">
                        üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                    </button>
                    <button onclick="showMain()" class="w-full bg-white/20 py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                        ‚Üê –ù–∞–∑–∞–¥
                    </button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
        <div id="gameScreen" class="screen hidden">
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl">
                <!-- –¢–∞–π–º–µ—Ä –∏ —Å—á–µ—Ç -->
                <div class="flex justify-between items-center mb-6">
                    <div class="text-center">
                        <p class="text-white/60 text-sm">–í—Ä–µ–º—è</p>
                        <p class="text-3xl font-bold" id="timer">60</p>
                    </div>
                    <div class="text-center">
                        <p class="text-white/60 text-sm">–û—á–∫–∏</p>
                        <p class="text-3xl font-bold" id="score">0</p>
                    </div>
                </div>
                
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ —Å–ª–æ–≤–æ–º -->
                <div class="bg-white/20 rounded-xl p-8 mb-6 min-h-[200px] flex items-center justify-center">
                    <div class="text-center">
                        <p class="text-sm text-white/60 mb-2" id="wordCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</p>
                        <h3 class="text-4xl font-bold" id="currentWord">–ù–∞–∂–º–∏—Ç–µ –°—Ç–∞—Ä—Ç</h3>
                        <p class="text-sm text-white/60 mt-2" id="wordHint" class="hidden"></p>
                    </div>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                <div id="gameControls" class="space-y-3">
                    <button onclick="toggleGame()" id="startBtn" class="w-full bg-green-500 py-4 px-6 rounded-xl font-semibold text-lg hover:bg-green-600 transition-all">
                        ‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç
                    </button>
                    <div id="actionButtons" class="hidden grid grid-cols-2 gap-3">
                        <button onclick="skipWord()" class="bg-red-500 py-4 px-6 rounded-xl font-semibold hover:bg-red-600 transition-all">
                            ‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å (-1)
                        </button>
                        <button onclick="guessWord()" class="bg-green-500 py-4 px-6 rounded-xl font-semibold hover:bg-green-600 transition-all">
                            ‚úÖ –£–≥–∞–¥–∞–ª (+1)
                        </button>
                    </div>
                    <button onclick="endGame()" class="w-full bg-white/20 py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                        üèÅ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É
                    </button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div id="resultsScreen" class="screen hidden">
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">üèÜ</div>
                    <h2 class="text-3xl font-bold mb-2">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
                </div>
                
                <div class="bg-white/20 rounded-xl p-6 mb-6">
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <p class="text-white/60 text-sm">–û—á–∫–∏</p>
                            <p class="text-2xl font-bold" id="finalScore">0</p>
                        </div>
                        <div>
                            <p class="text-white/60 text-sm">–£–≥–∞–¥–∞–Ω–æ</p>
                            <p class="text-2xl font-bold text-green-400" id="guessedWords">0</p>
                        </div>
                        <div>
                            <p class="text-white/60 text-sm">–ü—Ä–æ–ø—É—â–µ–Ω–æ</p>
                            <p class="text-2xl font-bold text-red-400" id="skippedWords">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-3">
                    <button onclick="shareResults()" class="w-full bg-blue-500 py-3 px-6 rounded-xl font-semibold hover:bg-blue-600 transition-all">
                        üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
                    </button>
                    <button onclick="startNewGame()" class="w-full bg-green-500 py-3 px-6 rounded-xl font-semibold hover:bg-green-600 transition-all">
                        üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞
                    </button>
                    <button onclick="showMain()" class="w-full bg-white/20 py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                        üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
        }

        // –ë–∞–∑–∞ —Å–ª–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
        const wordsDatabase = {
            animals: {
                name: "üêæ –ñ–∏–≤–æ—Ç–Ω—ã–µ",
                easy: ["–ö–æ—Ç", "–°–æ–±–∞–∫–∞", "–°–ª–æ–Ω", "–ñ–∏—Ä–∞—Ñ", "–õ–µ–≤", "–¢–∏–≥—Ä", "–ú–µ–¥–≤–µ–¥—å", "–í–æ–ª–∫", "–ó–∞—è—Ü", "–õ–∏—Å–∞"],
                medium: ["–ù–æ—Å–æ—Ä–æ–≥", "–ë–µ–≥–µ–º–æ—Ç", "–ü–∞–Ω—Ç–µ—Ä–∞", "–ì–µ–ø–∞—Ä–¥", "–ê–Ω—Ç–∏–ª–æ–ø–∞", "–ó–µ–±—Ä–∞", "–ö–µ–Ω–≥—É—Ä—É", "–ö–æ–∞–ª–∞", "–ü–∞–Ω–¥–∞", "–û—Ä–∞–Ω–≥—É—Ç–∞–Ω"],
                hard: ["–ö–∞–ø–∏–±–∞—Ä–∞", "–û–∫–∞–ø–∏", "–¢–∞–ø–∏—Ä", "–í–æ–º–±–∞—Ç", "–ï—Ö–∏–¥–Ω–∞", "–£—Ç–∫–æ–Ω–æ—Å", "–õ–µ–º—É—Ä", "–°—É—Ä–∏–∫–∞—Ç", "–ë—Ä–æ–Ω–µ–Ω–æ—Å–µ—Ü", "–ú—É—Ä–∞–≤—å–µ–¥"]
            },
            food: {
                name: "üçï –ï–¥–∞",
                easy: ["–•–ª–µ–±", "–ú–æ–ª–æ–∫–æ", "–Ø–π—Ü–æ", "–°—ã—Ä", "–ú–∞—Å–ª–æ", "–°—É–ø", "–ö–∞—à–∞", "–°–∞–ª–∞—Ç", "–ü–∏—Ü—Ü–∞", "–¢–æ—Ä—Ç"],
                medium: ["–õ–∞–∑–∞–Ω—å—è", "–ü–∞—ç–ª—å—è", "–†–∏–∑–æ—Ç—Ç–æ", "–¢–∏—Ä–∞–º–∏—Å—É", "–ö—Ä—É–∞—Å—Å–∞–Ω", "–§–æ–Ω–¥—é", "–ì—É–ª—è—à", "–†–∞—Ç–∞—Ç—É–π", "–ö–∞—Ä–ø–∞—á—á–æ", "–ë—Ä—É—Å–∫–µ—Ç—Ç–∞"],
                hard: ["–§—É–∞-–≥—Ä–∞", "–ö–æ–Ω—Ñ–∏", "–ë–ª–∞–Ω–º–∞–Ω–∂–µ", "–ö—Ä–µ–º–±—Ä—é–ª–µ", "–ü—Ä–æ—Ñ–∏—Ç—Ä–æ–ª–∏", "–ö–∏—à", "–¢–∞—Ä—Ç–∞—Ä", "–°–µ–≤–∏—á–µ", "–¢–µ–º–ø—É—Ä–∞", "–ú–∏—Å–æ"]
            },
            professions: {
                name: "üëî –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏",
                easy: ["–í—Ä–∞—á", "–£—á–∏—Ç–µ–ª—å", "–ü–æ–≤–∞—Ä", "–í–æ–¥–∏—Ç–µ–ª—å", "–ü—Ä–æ–¥–∞–≤–µ—Ü", "–ü–æ–ª–∏—Ü–µ–π—Å–∫–∏–π", "–ü–æ–∂–∞—Ä–Ω—ã–π", "–°—Ç—Ä–æ–∏—Ç–µ–ª—å", "–•—É–¥–æ–∂–Ω–∏–∫", "–ü–µ–≤–µ—Ü"],
                medium: ["–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä", "–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç", "–ü—Å–∏—Ö–æ–ª–æ–≥", "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä", "–î–∏–∑–∞–π–Ω–µ—Ä", "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç", "–§–æ—Ç–æ–≥—Ä–∞—Ñ", "–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫", "–Æ—Ä–∏—Å—Ç", "–≠–∫–æ–Ω–æ–º–∏—Å—Ç"],
                hard: ["–°–æ–º–µ–ª—å–µ", "–ö–∏–Ω–æ–ª–æ–≥", "–û—Ä–Ω–∏—Ç–æ–ª–æ–≥", "–ì–µ–º–º–æ–ª–æ–≥", "–≠—Ç–Ω–æ–≥—Ä–∞—Ñ", "–ü–∞–ª–µ–æ–Ω—Ç–æ–ª–æ–≥", "–ö—Ä–∏–º–∏–Ω–∞–ª–∏—Å—Ç", "–õ–æ–≥–∏—Å—Ç", "–ö–æ–ø–∏—Ä–∞–π—Ç–µ—Ä", "–¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥"]
            },
            movies: {
                name: "üé¨ –ö–∏–Ω–æ",
                easy: ["–¢–∏—Ç–∞–Ω–∏–∫", "–ê–≤–∞—Ç–∞—Ä", "–ú–∞—Ç—Ä–∏—Ü–∞", "–¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä", "–ì–ª–∞–¥–∏–∞—Ç–æ—Ä", "–õ–µ–æ–Ω", "–§–æ—Ä—Å–∞–∂", "–¢–∞–∫—Å–∏", "–ú–∞—Å–∫–∞", "–û–¥–∏–Ω –¥–æ–º–∞"],
                medium: ["–ù–∞—á–∞–ª–æ", "–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä", "–ü—Ä–µ—Å—Ç–∏–∂", "–ë–æ–π—Ü–æ–≤—Å–∫–∏–π –∫–ª—É–±", "–ö—Ä–∏–º–∏–Ω–∞–ª—å–Ω–æ–µ —á—Ç–∏–≤–æ", "–ó–µ–ª–µ–Ω–∞—è –º–∏–ª—è", "–ü–æ–±–µ–≥ –∏–∑ –®–æ—É—à–µ–Ω–∫–∞", "–ö—Ä–µ—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü", "–§–æ—Ä—Ä–µ—Å—Ç –ì–∞–º–ø", "–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ"],
                hard: ["–ú–µ–º–µ–Ω—Ç–æ", "–ú–∞–ª—Ö–æ–ª–ª–∞–Ω–¥ –î—Ä–∞–π–≤", "–î–æ–Ω–Ω–∏ –î–∞—Ä–∫–æ", "–í–µ—á–Ω–æ–µ —Å–∏—è–Ω–∏–µ —á–∏—Å—Ç–æ–≥–æ —Ä–∞–∑—É–º–∞", "–†–µ–∫–≤–∏–µ–º –ø–æ –º–µ—á—Ç–µ", "–ë–µ—Ä–¥–º—ç–Ω", "–õ–æ–±—Å—Ç–µ—Ä", "–î–æ–≥–≤–∏–ª–ª—å", "–°–æ–ª—è—Ä–∏—Å", "–°—Ç–∞–ª–∫–µ—Ä"]
            },
            tech: {
                name: "üíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",
                easy: ["–ö–æ–º–ø—å—é—Ç–µ—Ä", "–¢–µ–ª–µ—Ñ–æ–Ω", "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç", "–ü—Ä–∏–Ω—Ç–µ—Ä", "–ú–æ–Ω–∏—Ç–æ—Ä", "–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞", "–ú—ã—à—å", "–ù–∞—É—à–Ω–∏–∫–∏", "–ö–∞–º–µ—Ä–∞", "–†–æ–±–æ—Ç"],
                medium: ["–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä", "–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞", "–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å", "–ñ–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫", "–†–æ—É—Ç–µ—Ä", "–°–µ—Ä–≤–µ—Ä", "–î—Ä–æ–Ω", "–°–º–∞—Ä—Ç—á–∞—Å—ã", "–ü–ª–∞–Ω—à–µ—Ç", "Powerbank"],
                hard: ["–ë–ª–æ–∫—á–µ–π–Ω", "–ù–µ–π—Ä–æ—Å–µ—Ç—å", "–ö–≤–∞–Ω—Ç–æ–≤—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä", "–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞", "–¢–æ–∫–µ–Ω", "API", "–§—Ä–µ–π–º–≤–æ—Ä–∫", "–ê–ª–≥–æ—Ä–∏—Ç–º", "–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å", "–î–∞—Ç–∞—Ü–µ–Ω—Ç—Ä"]
            },
            sports: {
                name: "‚öΩ –°–ø–æ—Ä—Ç",
                easy: ["–§—É—Ç–±–æ–ª", "–ë–∞—Å–∫–µ—Ç–±–æ–ª", "–¢–µ–Ω–Ω–∏—Å", "–•–æ–∫–∫–µ–π", "–ë–æ–∫—Å", "–ü–ª–∞–≤–∞–Ω–∏–µ", "–ë–µ–≥", "–í–æ–ª–µ–π–±–æ–ª", "–ì–æ–ª—å—Ñ", "–®–∞—Ö–º–∞—Ç—ã"],
                medium: ["–ë–∏–∞—Ç–ª–æ–Ω", "–†–µ–≥–±–∏", "–ë–∞–¥–º–∏–Ω—Ç–æ–Ω", "–§–µ—Ö—Ç–æ–≤–∞–Ω–∏–µ", "–ì–∞–Ω–¥–±–æ–ª", "–í–æ–¥–Ω–æ–µ –ø–æ–ª–æ", "–ö–µ—Ä–ª–∏–Ω–≥", "–°–∫–≤–æ—à", "–ö—Ä–∏–∫–µ—Ç", "–ë–µ–π—Å–±–æ–ª"],
                hard: ["–ü–µ—Ç–∞–Ω–∫", "–õ–∞–∫—Ä–æ—Å—Å", "–ü–æ–ª–æ", "–ö—Ä–æ–∫–µ—Ç", "–ë–æ–±—Å–ª–µ–π", "–°–∫–µ–ª–µ—Ç–æ–Ω", "–ö–∞–π—Ç—Å–µ—Ä—Ñ–∏–Ω–≥", "–ü–∞—Ä–∫—É—Ä", "–°–ª—ç–∫–ª–∞–π–Ω", "–§–ª–æ—Ä–±–æ–ª"]
            }
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            currentWords: [],
            currentWordIndex: 0,
            score: 0,
            guessed: 0,
            skipped: 0,
            timeLeft: 60,
            isPlaying: false,
            timer: null,
            selectedCategories: ['animals', 'food', 'professions', 'movies'],
            difficulty: 'medium',
            roundTime: 60
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            updateTotalWords();
            initCategories();
        });

        // –§—É–Ω–∫—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
        }

        function showMain() {
            showScreen('mainScreen');
        }

        function showRules() {
            showScreen('rulesScreen');
        }

        function showCategories() {
            showScreen('categoriesScreen');
        }

        function startNewGame() {
            showScreen('setupScreen');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        function initCategories() {
            const categoryList = document.getElementById('categoryList');
            categoryList.innerHTML = '';
            
            Object.entries(wordsDatabase).forEach(([key, category]) => {
                const isChecked = gameState.selectedCategories.includes(key);
                const div = document.createElement('div');
                div.className = 'flex items-center p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-all cursor-pointer';
                div.innerHTML = `
                    <input type="checkbox" id="cat-${key}" value="${key}" 
                           class="w-5 h-5 mr-3" ${isChecked ? 'checked' : ''}>
                    <label for="cat-${key}" class="flex-1 cursor-pointer">
                        <span class="text-lg">${category.name}</span>
                        <span class="text-sm text-white/60 ml-2">
                            (${category.easy.length + category.medium.length + category.hard.length} —Å–ª–æ–≤)
                        </span>
                    </label>
                `;
                div.addEventListener('click', (e) => {
                    if (e.target.type !== 'checkbox') {
                        const checkbox = div.querySelector('input');
                        checkbox.checked = !checkbox.checked;
                    }
                });
                categoryList.appendChild(div);
            });
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        function saveCategories() {
            const checkboxes = document.querySelectorAll('#categoryList input[type="checkbox"]:checked');
            gameState.selectedCategories = Array.from(checkboxes).map(cb => cb.value);
            
            if (gameState.selectedCategories.length === 0) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é!');
                return;
            }
            
            updateTotalWords();
            showMain();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ —Å–ª–æ–≤
        function updateTotalWords() {
            let total = 0;
            gameState.selectedCategories.forEach(cat => {
                if (wordsDatabase[cat]) {
                    const category = wordsDatabase[cat];
                    total += category.easy.length + category.medium.length + category.hard.length;
                }
            });
            document.getElementById('totalWords').textContent = total;
        }

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame() {
            gameState.roundTime = parseInt(document.getElementById('roundTime').value);
            gameState.difficulty = document.getElementById('difficulty').value;
            gameState.timeLeft = gameState.roundTime;
            gameState.score = 0;
            gameState.guessed = 0;
            gameState.skipped = 0;
            gameState.currentWordIndex = 0;
            
            // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–ª–æ–≤
            prepareWords();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
            document.getElementById('timer').textContent = gameState.timeLeft;
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('currentWord').textContent = '–ù–∞–∂–º–∏—Ç–µ –°—Ç–∞—Ä—Ç';
            document.getElementById('wordCategory').textContent = '';
            document.getElementById('startBtn').textContent = '‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç';
            document.getElementById('actionButtons').classList.add('hidden');
            
            showScreen('gameScreen');
        }

        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ —Å–ª–æ–≤
        function prepareWords() {
            gameState.currentWords = [];
            
            gameState.selectedCategories.forEach(catKey => {
                const category = wordsDatabase[catKey];
                if (!category) return;
                
                let words = [];
                if (gameState.difficulty === 'easy') {
                    words = category.easy;
                } else if (gameState.difficulty === 'medium') {
                    words = category.medium;
                } else if (gameState.difficulty === 'hard') {
                    words = category.hard;
                } else { // mixed
                    words = [...category.easy, ...category.medium, ...category.hard];
                }
                
                words.forEach(word => {
                    gameState.currentWords.push({
                        word: word,
                        category: category.name
                    });
                });
            });
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ —Å–ª–æ–≤
            gameState.currentWords = shuffleArray(gameState.currentWords);
        }

        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π
        function toggleGame() {
            if (!gameState.isPlaying) {
                startRound();
            } else {
                pauseRound();
            }
        }

        function startRound() {
            gameState.isPlaying = true;
            document.getElementById('startBtn').textContent = '‚è∏Ô∏è –ü–∞—É–∑–∞';
            document.getElementById('actionButtons').classList.remove('hidden');
            
            showNextWord();
            startTimer();
        }

        function pauseRound() {
            gameState.isPlaying = false;
            document.getElementById('startBtn').textContent = '‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å';
            stopTimer();
        }

        function startTimer() {
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                document.getElementById('timer').textContent = gameState.timeLeft;
                
                if (gameState.timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function stopTimer() {
            if (gameState.timer) {
                clearInterval(gameState.timer);
                gameState.timer = null;
            }
        }

        function showNextWord() {
            if (gameState.currentWordIndex >= gameState.currentWords.length) {
                gameState.currentWordIndex = 0;
                gameState.currentWords = shuffleArray(gameState.currentWords);
            }
            
            const wordData = gameState.currentWords[gameState.currentWordIndex];
            document.getElementById('currentWord').textContent = wordData.word;
            document.getElementById('wordCategory').textContent = wordData.category;
        }

        function guessWord() {
            if (!gameState.isPlaying) return;
            
            gameState.score++;
            gameState.guessed++;
            gameState.currentWordIndex++;
            
            document.getElementById('score').textContent = gameState.score;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            const wordCard = document.getElementById('currentWord').parentElement.parentElement;
            wordCard.classList.add('bg-green-500/30');
            setTimeout(() => {
                wordCard.classList.remove('bg-green-500/30');
            }, 300);
            
            showNextWord();
        }

        function skipWord() {
            if (!gameState.isPlaying) return;
            
            gameState.score--;
            gameState.skipped++;
            gameState.currentWordIndex++;
            
            document.getElementById('score').textContent = gameState.score;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            const wordCard = document.getElementById('currentWord').parentElement.parentElement;
            wordCard.classList.add('bg-red-500/30');
            setTimeout(() => {
                wordCard.classList.remove('bg-red-500/30');
            }, 300);
            
            showNextWord();
        }

        function endGame() {
            gameState.isPlaying = false;
            stopTimer();
            
            // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('guessedWords').textContent = gameState.guessed;
            document.getElementById('skippedWords').textContent = gameState.skipped;
            
            showScreen('resultsScreen');
            
            // –í–∏–±—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
            }
        }

        function shareResults() {
            const text = `üé© –ò–≥—Ä–∞ –®–ª—è–ø–∞\nüèÜ –ú–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${gameState.score} –æ—á–∫–æ–≤\n‚úÖ –£–≥–∞–¥–∞–Ω–æ: ${gameState.guessed}\n‚ùå –ü—Ä–æ–ø—É—â–µ–Ω–æ: ${gameState.skipped}\n\n–ü–æ–ø—Ä–æ–±—É–π –ø–æ–±–∏—Ç—å –º–æ–π —Ä–µ–∫–æ—Ä–¥!`;
            
            if (tg && tg.MainButton) {
                tg.MainButton.setText('–ü–æ–¥–µ–ª–∏—Ç—å—Å—è');
                tg.MainButton.show();
                tg.MainButton.onClick(() => {
                    tg.sendData(JSON.stringify({
                        action: 'share',
                        score: gameState.score,
                        guessed: gameState.guessed,
                        skipped: gameState.skipped
                    }));
                });
            } else if (navigator.share) {
                navigator.share({
                    title: '–ò–≥—Ä–∞ –®–ª—è–ø–∞ - –ú–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç',
                    text: text
                });
            } else {
                navigator.clipboard.writeText(text);
                alert('–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            }
        }

        // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ Telegram
        if (tg) {
            tg.BackButton.onClick(() => {
                const currentScreen = document.querySelector('.screen:not(.hidden)');
                if (currentScreen.id !== 'mainScreen') {
                    showMain();
                }
            });
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã
            document.body.style.backgroundColor = tg.themeParams.bg_color || '#667eea';
        }
    </script>
</body>
</html>